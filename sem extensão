# Passo 1: Usar uma imagem oficial do Node.js como base
FROM node:18-alpine

# Passo 2: Definir o diretório de trabalho dentro do container
WORKDIR /usr/src/app

# Passo 3: Copiar o arquivo de dependências e instalar
# Isso é feito em um passo separado para aproveitar o cache do Docker
COPY package*.json ./
RUN npm install

# Passo 4: Copiar todo o código do seu aplicativo
COPY . .

# Passo 5: Criar um arquivo .env de produção (o Render vai injetar as variáveis)
# Este passo é opcional, mas garante que o app não falhe se o .env faltar
RUN touch .env

# Passo 6: Expor a porta que seu app usa (o Express usa a 3000)
EXPOSE 3000

# Passo 7: O comando para iniciar seu aplicativo
# Usamos "npm start" que aponta para "node index.js" no package.json
CMD [ "npm", "start" ]
